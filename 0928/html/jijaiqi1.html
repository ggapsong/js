<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="../style/jijiaqi.css">
</head>

<body>
    <div class="box">
        <ul class="list">
            <li>
                <div class="left">
                    <div class="jian">-</div>
                    <div class="num">0</div>
                    <div class="add">+</div>
                </div>
                <div class="right">
                    <div class="price">单价:<span>12.5</span>元</div>
                    <div class="money">小计:<span>0元</span></div>
                </div>
            </li>
            <li>
                <div class="left">
                    <div class="jian">-</div>
                    <div class="num">0</div>
                    <div class="add">+</div>
                </div>
                <div class="right">
                    <div class="price">单价:<span>10.5</span>元</div>
                    <div class="money">小计:<span>0元</span></div>
                </div>
            </li>
            <li>
                <div class="left">
                    <div class="jian">-</div>
                    <div class="num">0</div>
                    <div class="add">+</div>
                </div>
                <div class="right">
                    <div class="price">单价:<span>8.5</span>元</div>
                    <div class="money">小计:<span>0元</span></div>
                </div>
            </li>
            <li>
                <div class="left">
                    <div class="jian">-</div>
                    <div class="num">0</div>
                    <div class="add">+</div>
                </div>
                <div class="right">
                    <div class="price">单价:<span>8</span>元</div>
                    <div class="money">小计:<span>0元</span></div>
                </div>
            </li>
            <li>
                <div class="left">
                    <div class="jian">-</div>
                    <div class="num">0</div>
                    <div class="add">+</div>
                </div>
                <div class="right">
                    <div class="price">单价:<span>14.5</span>元</div>

                    <div class="money">小计:<span>0元</span></div>
                </div>
            </li>
        </ul>
        <div class="bottom">
            <div class="business">
                <div class="bleft">商品共合计：<div class="packages">0</div>件</div>
                <div class="bright">共花费了：<div class="packages">0</div>元</div>
            </div>
            <div class="expensive">其中最贵的商品单价是：
                <div class="packages"></div>
                元
            </div>
        </div>
    </div>
</body>
<script>
    var jian = document.querySelectorAll(".jian");
    var add = document.querySelectorAll(".add");
    var num = document.querySelectorAll(".num");
    var prices = document.querySelectorAll('.price span');
    var itemTotalSale = document.querySelectorAll('.money span');
    var totalBox = document.querySelector('.bleft .packages');
    var totalMoney = document.querySelector('.bright .packages');
    var xiaoji = document.querySelectorAll(".money span");
    var expensive = document.querySelector(".expensive .packages")

    for (let i = 0; i < add.length; i++) {
        jian[i].onclick = function () {
            let n = num[i].innerHTML
            n--;
            if (n < 0) {
                n = 0;
            }
            num[i].innerHTML = n;
            xiaoji[i].innerHTML = n * Number(prices[i].innerHTML) + "元";
            totalBox.innerHTML = totalBoxs();
            totalMoney.innerHTML = totalMoneyboxs();
            expensive.innerHTML = max();
        }
        add[i].onclick = function () {
            let n = num[i].innerHTML
            n++
            num[i].innerHTML = n;
            xiaoji[i].innerHTML = n * Number(prices[i].innerHTML) + "元";
            totalBox.innerHTML = totalBoxs();
            totalMoney.innerHTML = totalMoneyboxs();
            expensive.innerHTML = max();
        }
    }

    function totalBoxs() {//商品总件数
        var nums = 0;
        for (let i = 0; i < num.length; i++) {
            nums += Number(num[i].innerHTML);
        }
        return nums;
    }

    function totalMoneyboxs() {//商品总价格
        var nums = 0;
        for (let i = 0; i < xiaoji.length; i++) {
            nums += parseFloat(xiaoji[i].innerHTML);
        }
        return nums;
    }

    function max() {
        var n = 0;
        for (var i = 0; i < prices.length; i++) {
            if (num[i].innerHTML > 0) {
                if (Number(prices[i].innerHTML) > n) {
                    n = Number(prices[i].innerHTML)
                }
            }
        }
        return n
        // var arr = [];
        // prices.forEach(function(item,index){
        //     if(num[index].innerHTML>0){
        //         arr.push(item.innerHTML)
        //     }
        // });
        // if(arr.length>0){
        //     return Math.max(...arr);
        // }else{
        //     return 0
        // }
    }
</script>

</html>